DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'WhatsAppSpammer.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '202006021356534_init'
BEGIN
    CREATE TABLE [dbo].[ActivationNumbers] (
        [Number] [nvarchar](128) NOT NULL,
        [CountryCode] [nvarchar](max),
        [ActivationCode] [nvarchar](max),
        [MessagesSent] [int],
        [CreatedDateTime] [datetime] NOT NULL,
        [BannedDateTime] [datetime],
        [Price] [float],
        [SmsRegistrator] [nvarchar](max),
        CONSTRAINT [PK_dbo.ActivationNumbers] PRIMARY KEY ([Number])
    )
    CREATE TABLE [dbo].[Messages] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        [MessageText] [nvarchar](max),
        [PathToImage] [nvarchar](max),
        CONSTRAINT [PK_dbo.Messages] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[NumberBases] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        [MessageId] [int] NOT NULL,
        CONSTRAINT [PK_dbo.NumberBases] PRIMARY KEY ([Id])
    )
    CREATE INDEX [IX_MessageId] ON [dbo].[NumberBases]([MessageId])
    CREATE TABLE [dbo].[PhoneNumbers] (
        [Number] [nvarchar](128) NOT NULL,
        [HaveWhatsapp] [bit],
        [Name] [nvarchar](max),
        [Surname] [nvarchar](max),
        [Gender] [nvarchar](max),
        [NumberBase_Id] [int],
        CONSTRAINT [PK_dbo.PhoneNumbers] PRIMARY KEY ([Number])
    )
    CREATE INDEX [IX_NumberBase_Id] ON [dbo].[PhoneNumbers]([NumberBase_Id])
    ALTER TABLE [dbo].[NumberBases] ADD CONSTRAINT [FK_dbo.NumberBases_dbo.Messages_MessageId] FOREIGN KEY ([MessageId]) REFERENCES [dbo].[Messages] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[PhoneNumbers] ADD CONSTRAINT [FK_dbo.PhoneNumbers_dbo.NumberBases_NumberBase_Id] FOREIGN KEY ([NumberBase_Id]) REFERENCES [dbo].[NumberBases] ([Id])
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202006021356534_init', N'WhatsAppSpammer.Migrations.Configuration',  0x1F8B0800000000000400ED5BDB6EE336107D2FD07F10F4D416592BC9BE6C037B8BC4D9B446371744C9B66F0B46A26DA212A58A5460A3E897F5A19FD45FE8503793D48DB213272D160B04B6C9391C0ECFF03233FBCF5F7F8F7F588581F5881346223AB18F4687B685A917F9842E2676CAE76FDED93FBCFFFAABF1073F5C599FCA7E6F453F90A46C622F398F4F1C87794B1C22360A8997442C9AF39117850EF223E7F8F0F07BE7E8C8C100610396658D6F53CA4988B32FF0751A510FC73C45C165E4E38015BF438B9BA15A5728C42C461E9ED8BF2C1167A771ECC6280C71625BA70141A0868B83B96D214A238E38287972CFB0CB93882EA0272728B85BC718FACD51C070A1FCC9A6BBE93C0E8FC53C9C8D6009E5A58C47E140C0A3B785611C5D7C2BF3DA95E1C0741FC0C47C2D669D996F629F7A9C3C66E05769F8204CA70F7A320D122150B3F248973DB0B41E0715398043E2DF81354D039E26784271CA13141C5837E94340BC9FF1FA2EFA0DD3094D8340D618748636E507F8E92689629CF0F52D9E17F328B57754594717AE4435B97C86C00DE0B86D5DA2D5474C177C09EC3F7E675B176485FDF297822CF794804B80104F52F87A058AA3870057ED4EE7B8D308D89EACA780D031387C341ABC7BACCD3AED65B84BCC185A60E662CACBC16694BF3DEEB5498211C7FE39FCB9838DA094DD7C1F68E3332071175CB7F44D42BC8D500434ED157143768B178401B379D445AA6D0C3D7636CEDBE9D285FD877872EE056788E15121FD92BE3CF387FBB19051A856E38A6407175607FF88294E04DF6E10E738A1020367B6EC5B66F1775F5E748757FCD9C7020B2CEFA25998B1E66548BB61E096BCDD7CFC42DDD741DDFE79693057E8912CB2693603DAD62D0EB276B624717EBB93D6FD73D5ED2289C2DB28506855B67E76A334C936F6A8B5CB1D4A16989BEB77B38C28CE71589F926ADF464DE52E5DEA2AFD9A7436F63E0969B8FBB19124FEE50E687E3FF9093DE2CC5A288ECBD1CF225865445F851FBB6942F7310E6C677EA7FD9FF2E439652CF24846ECDAD153ED20AABA1FA86FF56F27B9F2AAB7C32C80EB240676832A13FBBB9A293AB14B9F96B0AB3D4E053EB275F7B8A6E738C01C5BE2F62F5E9E53C43CE4D71703ECE4ABBF8047E1449C27288047B8B8CD12CAEBEE47A8476214F4AAAF491A9E9B42B36A0CBDE51CC7823394F7AE8BC9E0D27955D7A11A4AB35A9F91C68EC43463022AA78301539A8F0A132A1E8E4647666C6C3C66A43194C3A393EFAD36C95D15ECC8C18A3829EC52EE8DC549229AB3DB70ED80BA67B838A358B115E8D312F02EE62D410F3888379B4531AB7A60A4662B15B47CF63660554EDB0321AF560D446EECC151EF18352465C1342869819AF4DADCB1A48EED3731DD9B8C76D26A36AA416AAE69B4754A609B05D2774075D2C30CA2DABAD32AEDCE3DC8BD77B24FA3334B88EA748C0D559EB6950B6FA2B54E1EAE2DC3BA4E4B5C777C099E0E07BF14E72D7EB1DC3CC83B7DE30E0F80863986E3B1863868A56D3512BCAE80225AAB88D6F9F882248C9F238E1E32734FFDB0D6AD65C36A71D672D0B63DA9BE9EA51F9792E2B3B4557684661BCEC102E402261C8A93347B594A4CE887C842F1284049CB7D7A1A056948BBEEE65D284A845486521ACCF1F428A80CA9B799A3AAC14E19536D19306F3D0AAACC5D6F34C7D5A3A132ACDE668E5A444965B0E227730C3D6C2A83E96D75D4B1A331B97685AB394EED02AC7AA491BF56A7C92E6EDA724E1A7867AB649B91C5ED56366CD36DB75D3A7F6F2A0E8D861145896736F849DE30807872CC52A19FDCF06AE8229DD4BB10A61DC680335DC2AF9C36BA1A1D4FB6175BE29EEB9DF922CBF7F3E1ABDC29FDBC47B61AD092B1D4967D12A80A6229A74AF9A3394E19A49261CADFF64F41F522DEB6D5688F13936D451319402EF1DE686455EB4BA66E35A32D48426D0ED9488A6CAF636BF06A67FFE95410DE0C3EC962433326C2C955A8D3D802FA2BADCE9FDA634DEF52B1B77AB4698FB371F150EAAFCCA9BD9CF22EB605067824BE7835B96BC67138121D46EEEFC13420D98DB9EC7089289963C6F3DC807D7C7874ACD5F7BC9E5A1B87313F185870F362890EFA88126F89927AAA63F75A9612FB9B10ADBE9501B7AF57D909B2A92685888FC3605A2A547CF8CE9FAE42A509CE288D2F57ACCC83080D9E5F7301CB00CB0F2E52D97B8E3D5BF5DE2CFAC07594D3714FC153B9EA6327BC86CA8EE758CDB697C59705ADD54264EAD6321833B848AE26F61F99D48935FBF5732578605D27700C9E5887D69F3DF3D82ADFFFDF3F7F9AF2E80F64F0E6F7646BAEE5CD77C25273E33B4169B7C661745484DB28B9A72C7C9583DA735EBC29A1B275E27FAB247B7BBCF01953EAFFF31CFAD3E4CB959CEA56C9F16D393170A176A445776CAAEDA8E878AC3F39379A6B09EA19BC96985EEBFF8B30A810C8DFB670817F888004F99ED8506B605648D05547D034506B7A7BEB2A83A65136EDFD0329DCEFAE42681AAA3315BDAF3A056D3194DC8B59CADD3061FF7AAB10B6A9386858FA5AFCF059AA0BEA8129D84AA4FF58061B1A238B0D8408B851EC299B48D56746E751B9A5691A955D6AD77D8EE0F98E4E134EE6C8E3D0EC015BB282C64F2848A1CB0798BC3FA3D7298F530E53C6E143A0D46D8B3DB16BFCAC8442D5797C1D6715C74F310550938808C4353D4B49E0577A5F34BC375A20C4665B3CC6C45A8A68025EAC2BA42BE080195061BEEA8CB8C3611C0018BBA62E5CFAB7D1ED9EE18F7881BC75195F6C07E95F08D5ECE3738216090A5981B19187AFC0613F5CBDFF17407C3D2F5F390000 , N'6.4.4')
END

IF @CurrentMigration < '202006021444185_init1'
BEGIN
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202006021444185_init1', N'WhatsAppSpammer.Migrations.Configuration',  0x1F8B0800000000000400ED5BDB6EE336107D2FD07F10F4D416592BC9BE6C037B8BC4D9B446371744C9B66F0B46A26DA212A58A5460A3E897F5A19FD45FE8503793D48DB213272D160B04B6C9391C0ECFF03233FBCF5F7F8F7F588581F5881346223AB18F4687B685A917F9842E2676CAE76FDED93FBCFFFAABF1073F5C599FCA7E6F453F90A46C622F398F4F1C87794B1C22360A8997442C9AF39117850EF223E7F8F0F07BE7E8C8C100610396658D6F53CA4988B32FF0751A510FC73C45C165E4E38015BF438B9BA15A5728C42C461E9ED8BF2C1167A771ECC6280C71625BA70141A0868B83B96D214A238E38287972CFB0CB93882EA0272728B85BC718FACD51C070A1FCC9A6BBE93C0E8FC53C9C8D6009E5A58C47E140C0A3B785611C5D7C2BF3DA95E1C0741FC0C47C2D669D996F629F7A9C3C66E05769F8204CA70F7A320D122150B3F248973DB0B41E0715398043E2DF81354D039E26784271CA13141C5837E94340BC9FF1FA2EFA0DD3094D8340D618748636E507F8E92689629CF0F52D9E17F328B57754594717AE4435B97C86C00DE0B86D5DA2D5474C177C09EC3F7E675B176485FDF297822CF794804B80104F52F87A058AA3870057ED4EE7B8D308D89EACA780D031387C341ABC7BACCD3AED65B84BCC185A60E662CACBC16694BF3DEEB5498211C7FE39FCB9838DA094DD7C1F68E3332071175CB7F44D42BC8D500434ED157143768B178401B379D445AA6D0C3D7636CEDBE9D285FD877872EE056788E15121FD92BE3CF387FBB19051A856E38A6407175607FF88294E04DF6E10E738A1020367B6EC5B66F1775F5E748757FCD9C7020B2CEFA25998B1E66548BB61E096BCDD7CFC42DDD741DDFE79693057E8912CB2693603DAD62D0EB276B624717EBB93D6FD73D5ED2289C2DB28506855B67E76A334C936F6A8B5CB1D4A16989BEB77B38C28CE71589F926ADF464DE52E5DEA2AFD9A7436F63E0969B8FBB19124FEE50E687E3FF9093DE2CC5A288ECBD1CF225865445F851FBB6942F7310E6C677EA7FD9FF2E439652CF24846ECDAD153ED20AABA1FA86FF56F27B9F2AAB7C32C80EB240676832A13FBBB9A293AB14B9F96B0AB3D4E053EB275F7B8A6E738C01C5BE2F62F5E9E53C43CE4D71703ECE4ABBF8047E1449C27288047B8B8CD12CAEBEE47A8476214F4AAAF491A9E9B42B36A0CBDE51CC7823394F7AE8BC9E0D27955D7A11A4AB35A9F91C68EC43463022AA78301539A8F0A132A1E8E4647666C6C3C66A43194C3A393EFAD36C95D15ECC8C18A3829EC52EE8DC549229AB3DB70ED80BA67B838A358B115E8D312F02EE62D410F3888379B4531AB7A60A4662B15B47CF63660554EDB0321AF560D446EECC151EF18352465C1342869819AF4DADCB1A48EED3731DD9B8C76D26A36AA416AAE69B4754A609B05D2774075D2C30CA2DABAD32AEDCE3DC8BD77B24FA3334B88EA748C0D559EB6950B6FA2B54E1EAE2DC3BA4E4B5C777C099E0E07BF14E72D7EB1DC3CC83B7DE30E0F80863986E3B1863868A56D3512BCAE80225AAB88D6F9F882248C9F238E1E32734FFDB0D6AD65C36A71D672D0B63DA9BE9EA51F9792E2B3B4557684661BCEC102E402261C8A93347B594A4CE887C842F1284049CB7D7A1A056948BBEEE65D284A845486521ACCF1F428A80CA9B799A3AAC14E19536D19306F3D0AAACC5D6F34C7D5A3A132ACDE668E5A444965B0E227730C3D6C2A83E96D75D4B1A331B97685AB394EED02AC7AA491BF56A7C92E6EDA724E1A7867AB649B91C5ED56366CD36DB75D3A7F6F2A0E8D861145896736F849DE30807872CC52A19FDCF06AE8229DD4BB10A61DC680335DC2AF9C36BA1A1D4FB6175BE29EEB9DF922CBF7F3E1ABDC29FDBC47B61AD092B1D4967D12A80A6229A74AF9A3394E19A49261CADFF64F41F522DEB6D5688F13936D451319402EF1DE686455EB4BA66E35A32D48426D0ED9488A6CAF636BF06A67FFE95410DE0C3EC962433326C2C955A8D3D802FA2BADCE9FDA634DEF52B1B77AB4698FB371F150EAAFCCA9BD9CF22EB605067824BE7835B96BC67138121D46EEEFC13420D98DB9EC7089289963C6F3DC807D7C7874ACD5F7BC9E5A1B87313F185870F362890EFA88126F89927AAA63F75A9612FB9B10ADBE9501B7AF57D909B2A92685888FC3605A2A547CF8CE9FAE42A509CE288D2F57ACCC83080D9E5F7301CB00CB0F2E52D97B8E3D5BF5DE2CFAC07594D3714FC153B9EA6327BC86CA8EE758CDB697C59705ADD54264EAD6321833B848AE26F61F99D48935FBF5732578605D27700C9E5887D69F3DF3D82ADFFFDF3F7F9AF2E80F64F0E6F7646BAEE5CD77C25273E33B4169B7C661745484DB28B9A72C7C9583DA735EBC29A1B275E27FAB247B7BBCF01953EAFFF31CFAD3E4CB959CEA56C9F16D393170A176A445776CAAEDA8E878AC3F39379A6B09EA19BC96985EEBFF8B30A810C8DFB670817F888004F99ED8506B605648D05547D034506B7A7BEB2A83A65136EDFD0329DCEFAE42681AAA3315BDAF3A056D3194DC8B59CADD3061FF7AAB10B6A9386858FA5AFCF059AA0BEA8129D84AA4FF58061B1A238B0D8408B851EC299B48D56746E751B9A5691A955D6AD77D8EE0F98E4E134EE6C8E3D0EC015BB282C64F2848A1CB0798BC3FA3D7298F530E53C6E143A0D46D8B3DB16BFCAC8442D5797C1D6715C74F310550938808C4353D4B49E0577A5F34BC375A20C4665B3CC6C45A8A68025EAC2BA42BE080195061BEEA8CB8C3611C0018BBA62E5CFAB7D1ED9EE18F7881BC75195F6C07E95F08D5ECE3738216090A5981B19187AFC0613F5CBDFF17407C3D2F5F390000 , N'6.4.4')
END

